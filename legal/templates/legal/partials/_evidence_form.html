<form hx-post="{% if editing %}{% url 'legal:evidence_edit' editing.pk %}{% else %}{% url 'legal:evidence_add' matter.pk %}{% endif %}" hx-target="#evidence-list" hx-swap="innerHTML"
      hx-encoding="multipart/form-data"
      class="px-4 py-4 border-b border-gray-700 bg-gray-750">
    {% csrf_token %}
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3">
        {% for field in form %}
        {% if field.name != "description" and field.name != "file" %}
        <div>
            <label for="{{ field.id_for_label }}" class="block text-xs font-medium text-gray-400 mb-1">{{ field.label }}</label>
            {{ field }}
        </div>
        {% endif %}
        {% endfor %}
        <div>
            <label for="{{ form.file.id_for_label }}" class="block text-xs font-medium text-gray-400 mb-1">File</label>
            {% if editing and editing.file %}
            <div class="flex items-center gap-2 mb-1.5">
                <a href="{{ editing.file.url }}" target="_blank" class="text-xs text-blue-400 hover:text-blue-300 truncate">{{ editing.file.name }}</a>
                <label class="flex items-center gap-1 text-xs text-gray-400 cursor-pointer shrink-0">
                    <input type="checkbox" name="clear_file" value="1" class="rounded border-gray-600 bg-gray-700 text-red-500 focus:ring-red-500 h-3 w-3">
                    Remove
                </label>
            </div>
            {% endif %}
            {{ form.file }}
        </div>
    </div>
    <div class="mb-3">
        <label for="{{ form.description.id_for_label }}" class="block text-xs font-medium text-gray-400 mb-1">Description</label>
        {{ form.description }}
    </div>
    <div class="flex gap-2">
        <button type="submit" class="px-3 py-1.5 bg-blue-600 hover:bg-blue-500 text-white text-xs font-medium rounded-md transition-colors">{% if editing %}Save Changes{% else %}Add Evidence{% endif %}</button>
        <button type="button" onclick="this.closest('form').remove()" class="px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-gray-300 text-xs font-medium rounded-md transition-colors">Cancel</button>
    </div>
</form>
